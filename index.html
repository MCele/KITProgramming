<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title> Programación Tangible </title>
  <meta name="description" content="Hello, World! - A-Frame">
  <link rel="stylesheet" href="./bootstrap-4.4.1-dist/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://kit.fontawesome.com/509fcef705.js" crossorigin="anonymous"></script>
  <script type="text/javascript" src="/lib/move2.js"></script>
  <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <!--script src="home/celeste/Escritorio/tesis/Aframe/AR.js/aframe/build/aframe-ar.js"></script-->
  <!--script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script-->
  <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
  <script>
    window.addEventListener('camera-init', (data) => {
      // console.log('camera-init', data);
    })
    window.addEventListener('camera-error', (error) => {
      // console.log('camera-error', error);
    })
    var intra = 0;
    AFRAME.registerComponent('registerevents', {
      init: function () {
        var marker = this.el;
        //console.log('marker: ', marker);
        marker.addEventListener('markerFound', function () { // marcador encontrado
          var markerId = marker.id;
          // console.log('Marcador encontrado', markerId)

          // Genera movimiento imagenes

          createViewImages(markerId);
          // genera movimiento(JSON)
          generarMovimiento(markerId);
        });
        marker.addEventListener('markerLost', function () {
          var markerId = marker.id;
          //ver si colocar un temporizador para que no detecte mvimientos por unos segundos
          // console.log('marcador perdido', markerId);
          // TODO: Add your own code here to react to the marker being lost.
          // marcador que dejó de ser capturarado
        });
      }
    });


  </script>
</head>

<body style='margin : 0px'>

  <a-scene embedded arjs='debugUIEnabled: false' vr-mode-ui="enabled: false">
    <!-- <a-text id="presentacionText" value="Escanee los marcadores" align="center" color="#FFF" visible="true"
      position="0 -0.55 0.55" geometry="primitive: plane; width: 1.75" material="color: #333">
    </a-text> -->
    <a-marker class="marcador" url="/assets/pattern/pattern_flecha_abajo.patt" type="pattern" id='marker_abajo'
      registerevents>
      <!-- crear escena -->
      <a-entity gltf-model='/assets/ply/scene.gltf' scale="2 2 2" position="0.1 -1 1.5" rotation="-90 -45 45"
        crossOrigin="anonymous" animation-mixer="clip:caminar_con_algo;" repeat="indefinite">
      </a-entity>
    </a-marker>
    <a-marker class="marcador" url="/assets/pattern/pattern_flecha_arriba.patt" type="pattern" id='marker_arriba'
      registerevents>
      <!-- crear escena -->
      <a-entity gltf-model='/assets/ply/scene.gltf' scale="2 2 2" position="0.1 -1 0.5" rotation="90 -145 40"
        crossOrigin="anonymous" animation-mixer="clip:caminar_con_algo;">
      </a-entity>
      <!-- <a-box buscamarcador></a-box> -->
    </a-marker>
    <a-marker class="marcador" url="/assets/pattern/pattern_flecha_atras.patt" type="pattern" id='marker_atras'
      registerevents>
      <!-- crear escena -->
      <a-entity gltf-model='/assets/ply/scene.gltf' scale="2 2 2" position="0.1 -1 1" rotation="25 -90 45"
        crossOrigin="anonymous" animation-mixer="clip:caminar_con_algo;" repeat="indefinite">
      </a-entity>
      <!-- <a-box buscamarcador></a-box> -->
    </a-marker>
    <a-marker class="marcador" url="/assets/pattern/pattern_flecha_adelante.patt" type="pattern" id='marker_adelante'
      registerevents>
      <!-- crear escena -->
      <a-entity gltf-model='/assets/ply/scene.gltf' scale="2 2 2" position="0.1 -1 1" rotation="25 90 -45"
        crossOrigin="anonymous" animation-mixer="clip:caminar_con_algo;">
      </a-entity>
      <!-- <a-box buscamarcador></a-box> -->
    </a-marker>
    <div>
      <!-- add a simple camera -->
      <a-entity camera></a-entity>
    </div>
  </a-scene>

  <div class="d-flex p-3 mr-auto bg-secondary text-white">
    <div class="media p-3">
      <p id="arrayImagesElement">
        
      </p>
    </div>
    <div class="p-2 ml-auto btn-group-vertical">
      <button type="button" class="btn btn-success" onclick="playProgramContext()">
        Ejecutar <i class="fas fa-play"></i></button>
      <button type="button" class="btn btn-danger" onclick="cleanViewImages()">
        Limpiar <i class="fas fa-trash-alt"></i></button>
    </div>


  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <script src="./bootstrap-4.4.1-dist/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

</body>

</html>